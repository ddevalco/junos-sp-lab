interfaces {
{% for interface in interfaces %}
{% if interface.name in [ 'ge-0/0/1'] %}
  {{ interface.name }} {
      unit 0 {
          family iso;
          family mpls;
      }
  }
{% else %}
   {{ interface.name }} {
       unit 0;
  }
{% endif %}
{% endfor %}
}
routing-options {
    router-id {{host['loopback']['ip']}};
    autonomous-system {{ asn }};
}
protocols {
  isis {
      level 1 disable;
      level 2 wide-metrics-only;      
{% for interface in interfaces %}
  {% if interface.name in [ 'ge-0/0/1'] %}
    interface {{ interface.name }}.0;
  {% endif %}
    interface lo0.0;
{% endfor %}
  }
  mpls {
{% for interface in interfaces %}
  {% if interface.name in [ 'ge-0/0/1'] %}
    interface {{ interface.name }}.0;
  {% endif %}
{% endfor %}
  }
  ldp {
{% for interface in interfaces %}
  {% if interface.name in [ 'ge-0/0/1'] %}
    interface {{ interface.name }}.0;
  {% endif %}
{% endfor %}
  }
  rsvp {
{% for interface in interfaces %}
  {% if interface.name in [ 'ge-0/0/1'] %}
    interface {{ interface.name }}.0;
  {% endif %}
{% endfor %}
  }
  bgp {
      group pe {
          type internal;
          local-address {{host['loopback']['ip']}};
          family inet {
            any;
          }
          family inet-vpn {
            any;
          }
          family inet6 {
            any;
          }
          family inet6-vpn {
            any;
          }
          cluster 1.1.1.1;                              
          neighbor {{host['pe_loopback']}};
          neighbor {{host['pe_loopback']}};
          neighbor {{host['pe_loopback']}};
          neighbor {{host['pe_loopback']}};        
        }
    }
}
